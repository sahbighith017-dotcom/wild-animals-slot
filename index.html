<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Wild Animals Slot</title>

<style>
body{
  margin:0;
  background:radial-gradient(circle at top,#1e4d2b,#081b12);
  font-family:'Segoe UI',sans-serif;
}
.game{
  max-width:420px;
  margin:auto;
  padding:10px;
}
.top{
  display:flex;
  justify-content:space-between;
  color:#fff;
  font-size:18px;
  margin-bottom:8px;
}
.frame{
  background:linear-gradient(#cfa93a,#7c5b13);
  border-radius:18px;
  padding:8px;
  position:relative;
}
.reels{
  display:flex;
  background:#0f3b28;
  border-radius:14px;
  overflow:hidden;
}
.reel{
  flex:1;
  height:240px;
  overflow:hidden;
  position:relative;
}
.strip{
  position:absolute;
  width:100%;
}
.symbol{
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:42px;
  background:#134b33;
  box-shadow:inset 0 0 10px #000;
}
.payline{
  position:absolute;
  top:50%;
  left:0;
  right:0;
  height:3px;
  background:rgba(255,255,255,.4);
  box-shadow:0 0 10px gold;
}
.panel{
  margin-top:12px;
  color:#fff;
}
.spin{
  width:100%;
  padding:14px;
  font-size:22px;
  border:none;
  border-radius:18px;
  background:linear-gradient(#ffe066,#f08c00);
}
.msg{
  text-align:center;
  margin-top:6px;
  font-size:18px;
  color:gold;
}
.free{
  color:#00ffd5;
}
</style>
</head>

<body>

<div class="game">
  <div class="top">
    <div>ğŸ’° <span id="balance">5000</span></div>
    <div>ğŸ¯ Bet: <span id="bet">50</span></div>
  </div>

  <div class="frame">
    <div class="reels" id="reels"></div>
    <div class="payline"></div>
  </div>

  <div class="panel">
    <button class="spin" id="spinBtn">SPIN</button>
    <div class="msg" id="msg"></div>
    <div class="msg free" id="free"></div>
  </div>
</div>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-slot-machine-spin-1930.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>

<script>
/* -------- CONFIG -------- */
const symbols = ["ğŸ¦","ğŸº","ğŸ¦…","ğŸ˜","ğŸ¯","ğŸ¾"];
const weights = {
  "ğŸ¦":6,   // Wild
  "ğŸº":10,
  "ğŸ¦…":12,
  "ğŸ˜":8,
  "ğŸ¯":9,
  "ğŸ¾":3    // Scatter
};

const paytable = {
  "ğŸ¦": {3:5,4:20,5:100},
  "ğŸº": {3:3,4:10,5:40},
  "ğŸ¦…": {3:3,4:8,5:30},
  "ğŸ˜": {3:4,4:12,5:50},
  "ğŸ¯": {3:4,4:15,5:60}
};

const STRIP_LEN = 40;
const SYMBOL_H = 80;

/* -------- STATE -------- */
let balance = 5000;
let bet = 50;
let freeSpins = 0;
let spinning = false;
const reels = [];

/* -------- INIT -------- */
const reelsEl = document.getElementById("reels");
for(let i=0;i<5;i++){
  const r = document.createElement("div");
  r.className="reel";
  const s = document.createElement("div");
  s.className="strip";
  r.appendChild(s);
  reelsEl.appendChild(r);
  reels.push(s);
}

const spinSound = document.getElementById("spinSound");
const winSound = document.getElementById("winSound");

/* -------- RANDOM -------- */
function weightedRandom(){
  let total=0;
  for(let w of Object.values(weights)) total+=w;
  let r=Math.random()*total;
  for(let k in weights){
    if(r<weights[k]) return k;
    r-=weights[k];
  }
}

/* -------- SPIN -------- */
document.getElementById("spinBtn").onclick=spin;

function spin(){
  if(spinning) return;
  if(freeSpins===0 && balance<bet) return alert("Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ");

  spinning=true;
  document.getElementById("spinBtn").disabled=true;

  if(freeSpins>0){
    freeSpins--;
  }else{
    balance-=bet;
  }

  updateUI();
  spinSound.currentTime=0;
  spinSound.play();

  const result=[];
  for(let i=0;i<5;i++) result.push(weightedRandom());

  reels.forEach((strip,i)=>{
    strip.innerHTML="";
    const stop=Math.floor(STRIP_LEN/2);
    for(let j=0;j<STRIP_LEN;j++){
      const d=document.createElement("div");
      d.className="symbol";
      d.textContent = (j===stop)?result[i]:weightedRandom();
      strip.appendChild(d);
    }
    strip.style.transition="none";
    strip.style.top="0px";
    setTimeout(()=>{
      strip.style.transition=`top ${1.2+i*0.15}s cubic-bezier(.16,.8,.28,1)`;
      strip.style.top=-(stop*SYMBOL_H)+"px";
    },i*120);
  });

  setTimeout(()=>{
    checkWin(result);
    spinning=false;
    document.getElementById("spinBtn").disabled=false;
  },2200);
}

/* -------- WIN -------- */
function checkWin(r){
  let count=1;
  for(let i=1;i<r.length;i++){
    if(r[i]===r[0]||r[i]==="ğŸ¦") count++;
    else break;
  }

  let win=0;
  if(paytable[r[0]] && paytable[r[0]][count]){
    win=bet*paytable[r[0]][count];
    balance+=win;
    winSound.play();
    msg("ğŸ‰ ÙØ²Øª: "+win);
  }else{
    msg("âŒ Ù„Ø§ ÙÙˆØ²");
  }

  const scat=r.filter(x=>x==="ğŸ¾").length;
  if(scat>=3){
    freeSpins+=10;
    msg("ğŸ Free Spins +10");
    winSound.play();
  }

  updateUI();
}

/* -------- UI -------- */
function updateUI(){
  balanceEl.textContent=balance;
  free.textContent=freeSpins>0?`ğŸ Free Spins: ${freeSpins}`:"";
}
function msg(t){document.getElementById("msg").textContent=t;}

const balanceEl=document.getElementById("balance");
const free=document.getElementById("free");
</script>

</body>
</html>
